<div class="outer">
  <h3>Notifications</h3>
  <div *ngIf="(!newOrderStatus && !criticalOrderStatus && !cancelOrderStatus)">
    <h6>
       !!! ALL NOTIFICATIONS ARE TURNED OFF !!!
    </h6>
  </div>
  <div>
    <mat-accordion>
      <div class='notify' *ngIf="newOrderStatus =='true'">
        <mat-expansion-panel (opened)="panelOpenState = true " (closed)="panelOpenState = false" [hideToggle]='true' >
          <mat-expansion-panel-header>
            <mat-panel-title>
              <h6>
                <b>
                  INVITE REQUESTS
                </b>
                <mat-chip color="#4CAF50" class="inv" selected>{{invitationFilteredArray.length}}</mat-chip>
              </h6>
            </mat-panel-title>
          </mat-expansion-panel-header>
          <div class="exp-body" *ngIf='newFilteredArray.length > 0'>
            <div *ngFor="let i = index ;let invitation of invitationFilteredArray" >
              <mat-card mat-elevation-z1>
                <div class="innerdiv">
                  <h5 >New Enrollment </h5>
                  </div>
                  <div>
                  <p>{{invitation.name}} from {{invitation.city}}, {{invitation.state}} has requested to be enrolled onto the Kirana platform.</p>
                  </div>
              </mat-card>
            </div>
          </div>
        </mat-expansion-panel>
      </div>
      <hr>
      <div class='notify' *ngIf="newOrderStatus =='true'">
        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false" [hideToggle]='true'>
          <mat-expansion-panel-header>
            <mat-panel-title>
              <h6>
                <b>
                  NEW ORDERS
                </b>
                <mat-chip color="#4CAF50" class="no" selected>{{newOrders}}</mat-chip>
              </h6>
            </mat-panel-title>
          </mat-expansion-panel-header>
          <div class="exp-body" *ngIf='newFilteredArray.length > 0'>
            <div *ngFor="let i = index ;let newNotification of newFilteredArray" >
              <mat-card mat-elevation-z1>
                <div class="innerdiv">
                  <h5 >New Order for {{newNotification.retailer_name}}</h5>
                  <p class="od">Date: {{newOrderDate[i]}}</p>
                  </div>
                  <div class="innerdiv">
                  <small>OrderID: {{newNotification.bill_no}}</small>
                  <p class="od">Time: {{newOrderTime[i]}}</p>
                  </div>
                  <p>Customer Name: {{newNotification.customer_name}}</p>
                  <p> Customer Address: {{newNotification.customer_address}}</p>
              </mat-card>
            </div>
          </div>
        </mat-expansion-panel>
      </div>
      <div class='notify' *ngIf="criticalOrderStatus =='true'">
        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false" [hideToggle]='true'>
          <mat-expansion-panel-header>
            <mat-panel-title>
              <h6>
                <b>
                  CRITICAL ORDERS
                </b>
                <mat-chip  class="se" selected>{{criticalOrders}}</mat-chip>
              </h6>
            </mat-panel-title>
          </mat-expansion-panel-header>
          <div class="exp-body" *ngIf='criticalFilteredArray.length > 0'>
            <div  *ngFor="let i = index; let criticalNotification of criticalFilteredArray">
              <mat-card>
                <div class="innerdiv" style="overflow: hidden;">
                  <h5>New Critical Order for {{criticalNotification.ShopName}}</h5>
                  <p class="od">Date: {{criticalOrderDate[i]}}</p>
                </div>
                <div class="innerdiv" style="overflow: hidden;">
                  <small>OrderID: {{criticalNotification.bill_no}}</small>
                  <p class="od">Time: {{criticalOrderTime[i]}}</p>
                </div>
                <p>Customer Name: {{criticalNotification.CustomerName}}</p>
                <p> Customer Address: {{criticalNotification.CustomerLocation}}</p>
              </mat-card>
            </div>
          </div>
        </mat-expansion-panel>
      </div>
      <div class='notify' *ngIf="cancelOrderStatus =='true'">
        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false" [hideToggle]='true'>
          <mat-expansion-panel-header>
            <h6>
              <b>
                CANCELLED ORDERS
              </b>
                <mat-chip color="warn" selected>{{cancelOrders}}</mat-chip>
            </h6>
          </mat-expansion-panel-header>
          <div class="exp-body" *ngIf='cancelFilteredArray.length > 0'>
            <div  *ngFor="let i = index; let cancelledNotification of cancelFilteredArray" >
              <mat-card>
                <div class="innerdiv">
                  <h5>New Cancelled Order for {{cancelledNotification.retailer_name}}</h5>
                  <p class="od">Date: {{cancelOrderDate[i]}}</p>
                </div>
                <div class="innerdiv">
                  <small>BillNo: {{cancelledNotification.bill_no}}</small>
                  <p class="od">Time: {{cancelOrderTime[i]}}</p>
                </div>
               <p>Customer Name: {{cancelledNotification.customer_name}}</p>
                <p> Customer Address: {{cancelledNotification.customer_address}}</p>
              </mat-card>
            </div>
          </div>
        </mat-expansion-panel>
      </div>
      <div class='notify' *ngIf="packedOrderStatus =='true'">
        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false" [hideToggle]='true'>
          <mat-expansion-panel-header>
            <h6>
              <b>
                PACKED ORDERS
              </b>
                <mat-chip color="#4CAF50" class="pack" selected>{{packedOrders}}</mat-chip>
            </h6>
          </mat-expansion-panel-header>
          <div class="exp-body" *ngIf='packedFilteredArray.length > 0'>
            <div  *ngFor="let i = index; let packedNotification of packedFilteredArray" >
              <mat-card>
                <div class="innerdiv">
                  <h5>New Order Packed for {{packedNotification.retailer_name}}</h5>
                  <p class="od">Date: {{packedOrderDate[i]}}</p>
                </div>
                <div class="innerdiv">
                  <small>BillNo: {{packedNotification.bill_no}}</small>
                  <p class="od">Time: {{packedOrderTime[i]}}</p>
                </div>
               <p>Customer Name: {{packedNotification.customer_name}}</p>
                <p> Customer Address: {{packedNotification.customer_address}}</p>
              </mat-card>
            </div>
          </div>
        </mat-expansion-panel>
      </div>
      <div class='notify' *ngIf="dispatchedOrderStatus =='true'">
        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false" [hideToggle]='true'>
          <mat-expansion-panel-header>
            <h6>
              <b>
                DISPATCHED ORDERS
              </b>
                <mat-chip color="#4CAF50" class="disp" selected>{{dispatchedOrders}}</mat-chip>
            </h6>
          </mat-expansion-panel-header>
          <div class="exp-body" *ngIf='dispatchedFilteredArray.length > 0'>
            <div  *ngFor="let i = index; let dispatchedNotification of dispatchedFilteredArray" >
              <mat-card>
                <div class="innerdiv">
                  <h5>New Order Dispatched for {{dispatchedNotification.retailer_name}}</h5>
                  <p class="od">Date: {{dispatchedOrderDate[i]}}</p>
                </div>
                <div class="innerdiv">
                  <small>BillNo: {{dispatchedNotification.bill_no}}</small>
                  <p class="od">Time: {{dispatchedOrderTime[i]}}</p>
                </div>
               <p>Customer Name: {{dispatchedNotification.customer_name}}</p>
                <p> Customer Address: {{dispatchedNotification.customer_address}}</p>
              </mat-card>
            </div>
          </div>
        </mat-expansion-panel>
      </div>
    </mat-accordion>
  </div>
</div>
